# Setting Special Permissions

## What are special permissions?

- Special permissions are like "super powers" for files and programs in Linux.
- They let you do things that normal permissions can't, like:
  - Run a program with the permissions of the file owner (setuid).
  - Run a program with the permissions of the file's group (setgid).
  - Make sure only the file owner can delete files in a directory (sticky bit).

### 1. Setuid (Set User ID) - "Run as Owner"

- When you run a program with setuid, it runs with the file owner's permissions.
- **Example:** The `passwd` command lets you change your password even though you're not root.
- **Why it works:** `passwd` has setuid set, so it runs as root temporarily.

### 2. Setgid (Set Group ID) - "Run as Group" or "Inherit Group"

- For programs: Runs with the file's group permissions.
- For directories: New files created inside inherit the directory's group.
- **Example:** A shared project folder where all files belong to the "developers" group.

### 3. Sticky Bit - "Only Owner Can Delete"

- Usually used on directories.
- Only file owner (or root) can delete files in that directory.
- **Example:** `/tmp` directory - you can only delete your own temporary files.

## How to Set Special Permissions

### Method 1: Using Numbers (4-digit chmod)

```bash
# Format: chmod [special][owner][group][other]
chmod 4755 file    # setuid + normal permissions (rwxr-xr-x)
chmod 2755 file    # setgid + normal permissions (rwxr-sr-x)
chmod 1755 file    # sticky bit + normal permissions (rwxr-xr-t)
```

**Special permission numbers:**

- **4** = setuid
- **2** = setgid  
- **1** = sticky bit

### Method 2: Using Symbols

```bash
chmod u+s file     # Add setuid
chmod g+s file     # Add setgid
chmod +t file      # Add sticky bit

chmod u-s file     # Remove setuid
chmod g-s file     # Remove setgid
chmod -t file      # Remove sticky bit
```

## Real Examples

### Example 1: Setuid on a program

```bash
# Make a script run as its owner
chmod 4755 /usr/local/bin/backup-script
# Now anyone can run it, but it executes with owner privileges
```

### Example 2: Setgid on a directory

```bash
# Create shared project directory
mkdir /shared/project
chmod 2775 /shared/project
# All files created here will belong to the directory's group
```

### Example 3: Sticky bit on directory

```bash
# Make a shared temp directory
mkdir /shared/temp
chmod 1777 /shared/temp
# Everyone can create files, but only owners can delete their own files
```

## How to See Special Permissions

```bash
ls -l filename
# Look for these characters in permissions:
# s = setuid/setgid
# t = sticky bit
# S/T = special permission set but no execute permission
```

**Examples of what you'll see:**

- `-rwsr-xr-x` = setuid set (s in owner execute position).
- `-rwxr-sr-x` = setgid set (s in group execute position).  
- `drwxrwxrwt` = sticky bit set (t in other execute position).
