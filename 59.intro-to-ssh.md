# Introduction to SSH

## What is SSH?

- SSH (Secure Shell) is a cryptographic network protocol used to securely connect to remote computers over an unsecured network.
- It provides strong authentication and encrypted data communications between two computers, typically used for remote login, command execution, and file transfers.
- Default port: 22.
- Commonly used tools: `ssh` (for connecting), `scp` (for secure file copy), and `sftp` (for secure file transfer).

## How SSH works?

- Client-Server Model: You run an SSH client on your local machine to connect to an SSH server (sshd) on the remote machine.
- Clinet: The machine you are connecting from.
- Server: The machine you are connecting to.
- Encryption: All data (including passwords) is encrypted, preventing eavesdropping.
- Authentication: Can be done via password or public/private key pairs.

## How to use SSH?

- Check whether SSH is installed or not using the following command:
- `ssh -V`: Show the version and details of the ssh. If it is not installed, you will see an error message like `command not found`.

## Installing SSH

- Debian/Ubuntu-based systems:
  - Install the OpenSSH client and server:
  - `sudo apt update`: Update the package list.
  - `sudo apt install openssh-client openssh-server`: Install the OpenSSH client and server packages.
- Start and enable the SSH service:
  - `sudo systemctl start ssh`: Start the SSH service.
  - `sudo systemctl enable ssh`: Enable the SSH service to start on boot.
- Check the status of the SSH service:
  - `sudo systemctl status sshd`: Check if the SSH service is running.

## Using SSH

- `ssh username@remote_host_ip_address`: Connect to a remote server, Enter password prompt will be displayed, enter the remote host's password to connect.
- `ssh -p 2222 username@remote_host_ip_address`: Connect to a remote server, on the specified port.
- `ssh-keygen -t ed25519 -C "your_email@example.com"`: Create a public-private key pair.
  - Generates a Ed25519 key pair. By default, keys are stored in ~/.ssh/ directory.
  - `<id_name>`: Private key (keep it secret).
  - `<id_name.pub>`: Public key (can be shared).
- `cat ~/.ssh/<id_name>.pub`: Display the contents of your public key.
- `ssh-agent bash`: Start the ssh-agent in the background.
- `ssh-add ~/.ssh/<id_name>`: Add your private key to the ssh-agent.
- `ssh-copy-id username@remote_host_ip_address`: Copy the public key on the remote server.
- `ssh username@remote_host`: Now, SSH will use your private key for authentication, and you wonâ€™t be prompted for a password.

## Disable Password Authentication and enable Public Key Authentication for SSH

- Edit the SSH Configuration File: Open the SSH server configuration file (/etc/ssh/sshd_config) using a text editor.
- `sudo nano /etc/ssh/sshd_config` or `sudo nano /etc/ssh/sshd_config`
- Disable Password Authentication: Locate the following line: `#PasswordAuthentication yes`.
- Uncomment it (remove the #) and change yes to no: `PasswordAuthentication no`.
- Enable Public Key Authentication: Ensure the following line is present and uncommented: `PubkeyAuthentication yes`.
- Restart the SSH Service: Save the file and restart the SSH service to apply the changes: `sudo systemctl restart sshd`.

**Note:** Ensure you have set up SSH key-based authentication before disabling password authentication to avoid locking yourself out.
