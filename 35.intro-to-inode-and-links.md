# Introduction to Inodes and Links

## What are Inodes?

- Inodes (Index Nodes) are data structures used by file systems to store information about files and directories.
- Each inode contains metadata about a file, such as its size, ownership, permissions, timestamps, and pointers to the data blocks where the actual file content is stored.
- Inodes do not store the file name or the actual data of the file; instead, they are identified by a unique inode number within the file system.
- The file name is stored in the directory entry, which maps the file name to its corresponding inode number.
- When a file is created, a new inode is allocated, and when a file is deleted, its inode is marked as free for reuse.

## What are Links?

- Links are references to files in the file system that allow multiple file names to point to the same inode.
- There are two types of links: hard links and symbolic (soft) links.

### Hard Links

- A hard link is a direct reference to the inode of a file.
- Multiple hard links can point to the same inode, meaning that the same file can have multiple names.
- Deleting a hard link does not delete the actual file until all hard links to that inode are removed.
- Hard links cannot span across different file systems and cannot be created for directories (with some exceptions for the root directory).
- To create a hard link, the `ln` command is used:

  ```bash
  ln existing_file new_hard_link
  ```

- To view the number of hard links to a file, use the `ls -l` command, which shows the link count in the second column.

  ```bash
  ls -l existing_file
  ```

### Symbolic (Soft) Links

- A symbolic link is a special type of file that contains a reference (path) to another file or directory.
- Symbolic links can span across different file systems and can point to directories.
- Deleting a symbolic link does not affect the original file; however, if the original file is deleted, the symbolic link becomes a "dangling" link that points to a non-existent file.
- To create a symbolic link, the `ln -s` command is used:

  ```bash
  ln -s target_file symbolic_link
  ```

- To view symbolic links, use the `ls -l` command, which shows the link target in the output.

  ```bash
  ls -l symbolic_link
  ```

## Example

- Example of creating and using links:

  ```bash
  # Create a file
  echo "Hello, World!" > original_file.txt

  # Create a hard link
  ln original_file.txt hard_link.txt

  # Create a symbolic link
  ln -s original_file.txt symbolic_link.txt

  # List files to see links
  ls -l
  ```

  - Output:

    ```bash
    -rw-r--r-- 2 user user 14 Jun 10 12:00 hard_link.txt
    lrwxrwxrwx 1 user user 18 Jun 10 12:00 symbolic_link.txt -> original_file.txt
    -rw-r--r-- 1 user user 14 Jun 10 12:00 original_file.txt
    ```

- In this example, `hard_link.txt` and `symbolic_link.txt` both point to `original_file.txt`. The hard link shares the same inode, while the symbolic link points to the file path.
- You can verify that both `hard_link.txt` and `original_file.txt` share the same inode number by using the `ls -i` command:

  ```bash
  ls -i original_file.txt hard_link.txt symbolic_link.txt
  ```

  - Output:

    ```bash
    123456 original_file.txt
    123456 hard_link.txt
    123457 symbolic_link.txt
    ```

- Here, `original_file.txt` and `hard_link.txt` have the same inode number (123456), while `symbolic_link.txt` has a different inode number (123457) because it is a separate file that points to the path of `original_file.txt`.

## Command and flags

- `ls -i <file_name>`: Display the inode number.
- `ls -i`: Display the inode number of all the files in the directory.
- `ln <source> <destination>`: Create a hard link.
- `ln -v <source> <destination>`: Create a hard link verbosely.
- `ln -i <source> <destination>`: Create a hard link interactively.
- `ln -s <source> <destination>`: Create a symbolic link.
- `ln -sv <source> <destination>`: Create a symbolic link verbosely.
- `ln -si <source> <destination>`: Create a symbolic link interactively.
- `ls -l`: Display the number of links.
- `ls -l <file_name>`: Display the number of links of a file.
- `stat <file_name>`: Display the inode number.
- `stat`: Display the inode number of all the files in the directory.
